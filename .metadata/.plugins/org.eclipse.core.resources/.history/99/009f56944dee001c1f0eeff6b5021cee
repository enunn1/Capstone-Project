package org.ethannunn.gamereviews.repository;

import static org.junit.jupiter.api.Assertions.assertEquals;

import java.util.List;

import org.ethannunn.gamereviews.entity.GameEntity;
//import org.junit.jupiter.api.Test;
import org.junit.jupiter.params.ParameterizedTest;
import org.junit.jupiter.params.provider.CsvSource;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;

@SpringBootTest
public class GameRepositoryTest {

	@Autowired
	private GameRepository gameRepository;

	@ParameterizedTest
	@CsvSource({ "Game Title, Game, true", "Game Title, Mario, false"})
	public void testFindByGameTitle(String gameTitle, String search, boolean veracity) {
		GameEntity gameEntity = new GameEntity();
		gameEntity.setGameTitle(gameTitle);
		gameRepository.save(gameEntity);
		
		List<GameEntity> gameList = gameRepository.findByGameTitle(search);
		boolean gameInSearch = gameList.contains(gameEntity);
		
		assertEquals(gameInSearch, veracity);
	}
}
